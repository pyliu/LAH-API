<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="For zhongli land office use only">
<meta name="author" content="LIU, PANG-YU">
<title>桃園市中壢地政事務所</title>

<!-- Bootstrap core CSS -->
<link rel="stylesheet" href="assets/css/bootstrap.min.css">
<link rel="stylesheet" href="assets/css/loading.css">
<link rel="stylesheet" href="assets/css/loading-btn.css">
<link href="assets/css/animate.css" rel="stylesheet">
<link href="assets/css/awesome-font.css" rel="stylesheet">
<!-- Custom styles for this template -->
<link href="assets/css/bootstrap-vue.min.css" rel="stylesheet">
<link href="assets/css/main.css" rel="stylesheet">
</head>

<body>
  <section class="hide">
    <div class="container-fluid" v-cloak>
        <lah-reg-table
            :baked-data="settings['reg_cases_by_day']"
            :max-height="settings['reg_cases_by_day_max_height']"
            type="xl"
        ></lah-reg-table>
    </div>
  </section><!-- /section -->
  <!-- Bootstrap core JavaScript -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/popper.min.js"></script>
  <script src="assets/js/bootstrap.min.js"></script>
  <!-- Vue -->
  <script src="assets/js/vue.js"></script>
  <script src="assets/js/vuex.js"></script>
  <script src="assets/js/bootstrap-vue.min.js"></script>
  <script src="assets/js/bootstrap-vue-icons.min.js"></script>
  <!-- Add-On -->
  <script src="assets/js/axios.min.js"></script>
  <script src="assets/js/localforage.min.js"></script>
  <script src="assets/js/global.js"></script>
  <script src="assets/js/components/lah-global.js"></script>
  <script src="assets/js/components/lah-components.js"></script>


  <script type="text/javascript">
    $(document).ready(e => {
        vueApp.setSetting('reg_cases_by_day', undefined);
        vueApp.setSetting('reg_cases_by_day_max_height', window.innerHeight - 130);
        let d = new Date();
        let today = `${d.getFullYear() - 1911}${("0" + (d.getMonth()+1)).slice(-2)}${("0" + d.getDate()).slice(-2)}`;
        axios.post(CONFIG.JSON_API_EP, {
            type: "reg_cases_by_day",
            qday: today
        }).then(res => {
            if (res.data.status == XHR_STATUS_CODE.SUCCESS_NORMAL) {
                vueApp.setSetting('reg_cases_by_day', res.data.baked);
                vueApp.setLocalCache('reg_cases_by_day', res.data.baked, 60000);   // 1 min
            } else {
                addNotification({
                    title: "查詢今日案件",
                    message: res.data.message,
                    type: "warning"
                });
            }
        }).catch(err => {
            this.error = err;
        });
    });
  </script>
</body>
</html>
